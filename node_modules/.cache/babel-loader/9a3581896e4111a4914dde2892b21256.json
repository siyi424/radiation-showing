{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { isFunction, retrieve2, extend, keys, trim } from 'zrender/lib/core/util.js';\nimport { SPECIAL_STATES, DISPLAY_STATES } from '../util/states.js';\nimport { deprecateReplaceLog } from '../util/log.js';\nimport { makeInner, interpolateRawValues } from '../util/model.js';\nimport { initProps, updateProps } from '../util/graphic.js';\nvar EMPTY_OBJ = {};\nexport function setLabelText(label, labelTexts) {\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var text = labelTexts[stateName];\n    var state = label.ensureState(stateName);\n    state.style = state.style || {};\n    state.style.text = text;\n  }\n\n  var oldStates = label.currentStates.slice();\n  label.clearStates(true);\n  label.setStyle({\n    text: labelTexts.normal\n  });\n  label.useStates(oldStates, true);\n}\n\nfunction getLabelText(opt, stateModels, interpolatedValue) {\n  var labelFetcher = opt.labelFetcher;\n  var labelDataIndex = opt.labelDataIndex;\n  var labelDimIndex = opt.labelDimIndex;\n  var normalModel = stateModels.normal;\n  var baseText;\n\n  if (labelFetcher) {\n    baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, normalModel && normalModel.get('formatter'), interpolatedValue != null ? {\n      interpolatedValue: interpolatedValue\n    } : null);\n  }\n\n  if (baseText == null) {\n    baseText = isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt, interpolatedValue) : opt.defaultText;\n  }\n\n  var statesText = {\n    normal: baseText\n  };\n\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var stateModel = stateModels[stateName];\n    statesText[stateName] = retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, stateName, null, labelDimIndex, stateModel && stateModel.get('formatter')) : null, baseText);\n  }\n\n  return statesText;\n}\n\nfunction setLabelStyle(targetEl, labelStatesModels, opt, stateSpecified // TODO specified position?\n) {\n  opt = opt || EMPTY_OBJ;\n  var isSetOnText = targetEl instanceof ZRText;\n  var needsCreateText = false;\n\n  for (var i = 0; i < DISPLAY_STATES.length; i++) {\n    var stateModel = labelStatesModels[DISPLAY_STATES[i]];\n\n    if (stateModel && stateModel.getShallow('show')) {\n      needsCreateText = true;\n      break;\n    }\n  }\n\n  var textContent = isSetOnText ? targetEl : targetEl.getTextContent();\n\n  if (needsCreateText) {\n    if (!isSetOnText) {\n      // Reuse the previous\n      if (!textContent) {\n        textContent = new ZRText();\n        targetEl.setTextContent(textContent);\n      } // Use same state proxy\n\n\n      if (targetEl.stateProxy) {\n        textContent.stateProxy = targetEl.stateProxy;\n      }\n    }\n\n    var labelStatesTexts = getLabelText(opt, labelStatesModels);\n    var normalModel = labelStatesModels.normal;\n    var showNormal = !!normalModel.getShallow('show');\n    var normalStyle = createTextStyle(normalModel, stateSpecified && stateSpecified.normal, opt, false, !isSetOnText);\n    normalStyle.text = labelStatesTexts.normal;\n\n    if (!isSetOnText) {\n      // Always create new\n      targetEl.setTextConfig(createTextConfig(normalModel, opt, false));\n    }\n\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      var stateModel = labelStatesModels[stateName];\n\n      if (stateModel) {\n        var stateObj = textContent.ensureState(stateName);\n        var stateShow = !!retrieve2(stateModel.getShallow('show'), showNormal);\n\n        if (stateShow !== showNormal) {\n          stateObj.ignore = !stateShow;\n        }\n\n        stateObj.style = createTextStyle(stateModel, stateSpecified && stateSpecified[stateName], opt, true, !isSetOnText);\n        stateObj.style.text = labelStatesTexts[stateName];\n\n        if (!isSetOnText) {\n          var targetElEmphasisState = targetEl.ensureState(stateName);\n          targetElEmphasisState.textConfig = createTextConfig(stateModel, opt, true);\n        }\n      }\n    } // PENDING: if there is many requirements that emphasis position\n    // need to be different from normal position, we might consider\n    // auto slient is those cases.\n\n\n    textContent.silent = !!normalModel.getShallow('silent'); // Keep x and y\n\n    if (textContent.style.x != null) {\n      normalStyle.x = textContent.style.x;\n    }\n\n    if (textContent.style.y != null) {\n      normalStyle.y = textContent.style.y;\n    }\n\n    textContent.ignore = !showNormal; // Always create new style.\n\n    textContent.useStyle(normalStyle);\n    textContent.dirty();\n\n    if (opt.enableTextSetter) {\n      labelInner(textContent).setLabelText = function (interpolatedValue) {\n        var labelStatesTexts = getLabelText(opt, labelStatesModels, interpolatedValue);\n        setLabelText(textContent, labelStatesTexts);\n      };\n    }\n  } else if (textContent) {\n    // Not display rich text.\n    textContent.ignore = true;\n  }\n\n  targetEl.dirty();\n}\n\nexport { setLabelStyle };\nexport function getLabelStatesModels(itemModel, labelName) {\n  labelName = labelName || 'label';\n  var statesModels = {\n    normal: itemModel.getModel(labelName)\n  };\n\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    statesModels[stateName] = itemModel.getModel([stateName, labelName]);\n  }\n\n  return statesModels;\n}\n/**\n * Set basic textStyle properties.\n */\n\nexport function createTextStyle(textStyleModel, specifiedTextStyle, // Fixed style in the code. Can't be set by model.\nopt, isNotNormal, isAttached // If text is attached on an element. If so, auto color will handling in zrender.\n) {\n  var textStyle = {};\n  setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached);\n  specifiedTextStyle && extend(textStyle, specifiedTextStyle); // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n\n  return textStyle;\n}\nexport function createTextConfig(textStyleModel, opt, isNotNormal) {\n  opt = opt || {};\n  var textConfig = {};\n  var labelPosition;\n  var labelRotate = textStyleModel.getShallow('rotate');\n  var labelDistance = retrieve2(textStyleModel.getShallow('distance'), isNotNormal ? null : 5);\n  var labelOffset = textStyleModel.getShallow('offset');\n  labelPosition = textStyleModel.getShallow('position') || (isNotNormal ? null : 'inside'); // 'outside' is not a valid zr textPostion value, but used\n  // in bar series, and magric type should be considered.\n\n  labelPosition === 'outside' && (labelPosition = opt.defaultOutsidePosition || 'top');\n\n  if (labelPosition != null) {\n    textConfig.position = labelPosition;\n  }\n\n  if (labelOffset != null) {\n    textConfig.offset = labelOffset;\n  }\n\n  if (labelRotate != null) {\n    labelRotate *= Math.PI / 180;\n    textConfig.rotation = labelRotate;\n  }\n\n  if (labelDistance != null) {\n    textConfig.distance = labelDistance;\n  } // fill and auto is determined by the color of path fill if it's not specified by developers.\n\n\n  textConfig.outsideFill = textStyleModel.get('color') === 'inherit' ? opt.inheritColor || null : 'auto';\n  return textConfig;\n}\n/**\n * The uniform entry of set text style, that is, retrieve style definitions\n * from `model` and set to `textStyle` object.\n *\n * Never in merge mode, but in overwrite mode, that is, all of the text style\n * properties will be set. (Consider the states of normal and emphasis and\n * default value can be adopted, merge would make the logic too complicated\n * to manage.)\n */\n\nfunction setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached) {\n  // Consider there will be abnormal when merge hover style to normal style if given default value.\n  opt = opt || EMPTY_OBJ;\n  var ecModel = textStyleModel.ecModel;\n  var globalTextStyle = ecModel && ecModel.option.textStyle; // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             rich: {\n  //                 // no 'a' here but using parent 'a'.\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n\n  var richItemNames = getRichItemNames(textStyleModel);\n  var richResult;\n\n  if (richItemNames) {\n    richResult = {};\n\n    for (var name_1 in richItemNames) {\n      if (richItemNames.hasOwnProperty(name_1)) {\n        // Cascade is supported in rich.\n        var richTextStyle = textStyleModel.getModel(['rich', name_1]); // In rich, never `disableBox`.\n        // FIXME: consider `label: {formatter: '{a|xx}', color: 'blue', rich: {a: {}}}`,\n        // the default color `'blue'` will not be adopted if no color declared in `rich`.\n        // That might confuses users. So probably we should put `textStyleModel` as the\n        // root ancestor of the `richTextStyle`. But that would be a break change.\n\n        setTokenTextStyle(richResult[name_1] = {}, richTextStyle, globalTextStyle, opt, isNotNormal, isAttached, false, true);\n      }\n    }\n  }\n\n  if (richResult) {\n    textStyle.rich = richResult;\n  }\n\n  var overflow = textStyleModel.get('overflow');\n\n  if (overflow) {\n    textStyle.overflow = overflow;\n  }\n\n  var margin = textStyleModel.get('minMargin');\n\n  if (margin != null) {\n    textStyle.margin = margin;\n  }\n\n  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, true, false);\n} // Consider case:\n// {\n//     data: [{\n//         value: 12,\n//         label: {\n//             rich: {\n//                 // no 'a' here but using parent 'a'.\n//             }\n//         }\n//     }],\n//     rich: {\n//         a: { ... }\n//     }\n// }\n// TODO TextStyleModel\n\n\nfunction getRichItemNames(textStyleModel) {\n  // Use object to remove duplicated names.\n  var richItemNameMap;\n\n  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n    var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n\n    if (rich) {\n      richItemNameMap = richItemNameMap || {};\n      var richKeys = keys(rich);\n\n      for (var i = 0; i < richKeys.length; i++) {\n        var richKey = richKeys[i];\n        richItemNameMap[richKey] = 1;\n      }\n    }\n\n    textStyleModel = textStyleModel.parentModel;\n  }\n\n  return richItemNameMap;\n}\n\nvar TEXT_PROPS_WITH_GLOBAL = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'];\nvar TEXT_PROPS_SELF = ['align', 'lineHeight', 'width', 'height', 'tag', 'verticalAlign'];\nvar TEXT_PROPS_BOX = ['padding', 'borderWidth', 'borderRadius', 'borderDashOffset', 'backgroundColor', 'borderColor', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n\nfunction setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, isBlock, inRich) {\n  // In merge mode, default value should not be given.\n  globalTextStyle = !isNotNormal && globalTextStyle || EMPTY_OBJ;\n  var inheritColor = opt && opt.inheritColor;\n  var fillColor = textStyleModel.getShallow('color');\n  var strokeColor = textStyleModel.getShallow('textBorderColor');\n  var opacity = retrieve2(textStyleModel.getShallow('opacity'), globalTextStyle.opacity);\n\n  if (fillColor === 'inherit' || fillColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (fillColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n\n    if (inheritColor) {\n      fillColor = inheritColor;\n    } else {\n      fillColor = null;\n    }\n  }\n\n  if (strokeColor === 'inherit' || strokeColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (strokeColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n\n    if (inheritColor) {\n      strokeColor = inheritColor;\n    } else {\n      strokeColor = null;\n    }\n  }\n\n  if (!isAttached) {\n    // Only use default global textStyle.color if text is individual.\n    // Otherwise it will use the strategy of attached text color because text may be on a path.\n    fillColor = fillColor || globalTextStyle.color;\n    strokeColor = strokeColor || globalTextStyle.textBorderColor;\n  }\n\n  if (fillColor != null) {\n    textStyle.fill = fillColor;\n  }\n\n  if (strokeColor != null) {\n    textStyle.stroke = strokeColor;\n  }\n\n  var textBorderWidth = retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n\n  if (textBorderWidth != null) {\n    textStyle.lineWidth = textBorderWidth;\n  }\n\n  var textBorderType = retrieve2(textStyleModel.getShallow('textBorderType'), globalTextStyle.textBorderType);\n\n  if (textBorderType != null) {\n    textStyle.lineDash = textBorderType;\n  }\n\n  var textBorderDashOffset = retrieve2(textStyleModel.getShallow('textBorderDashOffset'), globalTextStyle.textBorderDashOffset);\n\n  if (textBorderDashOffset != null) {\n    textStyle.lineDashOffset = textBorderDashOffset;\n  }\n\n  if (!isNotNormal && opacity == null && !inRich) {\n    opacity = opt && opt.defaultOpacity;\n  }\n\n  if (opacity != null) {\n    textStyle.opacity = opacity;\n  } // TODO\n\n\n  if (!isNotNormal && !isAttached) {\n    // Set default finally.\n    if (textStyle.fill == null && opt.inheritColor) {\n      textStyle.fill = opt.inheritColor;\n    }\n  } // Do not use `getFont` here, because merge should be supported, where\n  // part of these properties may be changed in emphasis style, and the\n  // others should remain their original value got from normal style.\n\n\n  for (var i = 0; i < TEXT_PROPS_WITH_GLOBAL.length; i++) {\n    var key = TEXT_PROPS_WITH_GLOBAL[i];\n    var val = retrieve2(textStyleModel.getShallow(key), globalTextStyle[key]);\n\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n\n  for (var i = 0; i < TEXT_PROPS_SELF.length; i++) {\n    var key = TEXT_PROPS_SELF[i];\n    var val = textStyleModel.getShallow(key);\n\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n\n  if (textStyle.verticalAlign == null) {\n    var baseline = textStyleModel.getShallow('baseline');\n\n    if (baseline != null) {\n      textStyle.verticalAlign = baseline;\n    }\n  }\n\n  if (!isBlock || !opt.disableBox) {\n    for (var i = 0; i < TEXT_PROPS_BOX.length; i++) {\n      var key = TEXT_PROPS_BOX[i];\n      var val = textStyleModel.getShallow(key);\n\n      if (val != null) {\n        textStyle[key] = val;\n      }\n    }\n\n    var borderType = textStyleModel.getShallow('borderType');\n\n    if (borderType != null) {\n      textStyle.borderDash = borderType;\n    }\n\n    if ((textStyle.backgroundColor === 'auto' || textStyle.backgroundColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.backgroundColor === 'auto') {\n          deprecateReplaceLog('backgroundColor: \\'auto\\'', 'backgroundColor: \\'inherit\\'');\n        }\n      }\n\n      textStyle.backgroundColor = inheritColor;\n    }\n\n    if ((textStyle.borderColor === 'auto' || textStyle.borderColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.borderColor === 'auto') {\n          deprecateReplaceLog('borderColor: \\'auto\\'', 'borderColor: \\'inherit\\'');\n        }\n      }\n\n      textStyle.borderColor = inheritColor;\n    }\n  }\n}\n\nexport function getFont(opt, ecModel) {\n  var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\n  return trim([// FIXME in node-canvas fontWeight is before fontStyle\n  opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\n}\nexport var labelInner = makeInner();\nexport function setLabelValueAnimation(label, labelStatesModels, value, getDefaultText) {\n  if (!label) {\n    return;\n  }\n\n  var obj = labelInner(label);\n  obj.prevValue = obj.value;\n  obj.value = value;\n  var normalLabelModel = labelStatesModels.normal;\n  obj.valueAnimation = normalLabelModel.get('valueAnimation');\n\n  if (obj.valueAnimation) {\n    obj.precision = normalLabelModel.get('precision');\n    obj.defaultInterpolatedText = getDefaultText;\n    obj.statesModels = labelStatesModels;\n  }\n}\nexport function animateLabelValue(textEl, dataIndex, data, animatableModel, labelFetcher) {\n  var labelInnerStore = labelInner(textEl);\n\n  if (!labelInnerStore.valueAnimation || labelInnerStore.prevValue === labelInnerStore.value) {\n    // Value not changed, no new label animation\n    return;\n  }\n\n  var defaultInterpolatedText = labelInnerStore.defaultInterpolatedText; // Consider the case that being animating, do not use the `obj.value`,\n  // Otherwise it will jump to the `obj.value` when this new animation started.\n\n  var currValue = retrieve2(labelInnerStore.interpolatedValue, labelInnerStore.prevValue);\n  var targetValue = labelInnerStore.value;\n\n  function during(percent) {\n    var interpolated = interpolateRawValues(data, labelInnerStore.precision, currValue, targetValue, percent);\n    labelInnerStore.interpolatedValue = percent === 1 ? null : interpolated;\n    var labelText = getLabelText({\n      labelDataIndex: dataIndex,\n      labelFetcher: labelFetcher,\n      defaultText: defaultInterpolatedText ? defaultInterpolatedText(interpolated) : interpolated + ''\n    }, labelInnerStore.statesModels, interpolated);\n    setLabelText(textEl, labelText);\n  }\n\n  textEl.percent = 0;\n  (labelInnerStore.prevValue == null ? initProps : updateProps)(textEl, {\n    // percent is used to prevent animation from being aborted #15916\n    percent: 1\n  }, animatableModel, dataIndex, null, during);\n}","map":{"version":3,"names":["ZRText","isFunction","retrieve2","extend","keys","trim","SPECIAL_STATES","DISPLAY_STATES","deprecateReplaceLog","makeInner","interpolateRawValues","initProps","updateProps","EMPTY_OBJ","setLabelText","label","labelTexts","i","length","stateName","text","state","ensureState","style","oldStates","currentStates","slice","clearStates","setStyle","normal","useStates","getLabelText","opt","stateModels","interpolatedValue","labelFetcher","labelDataIndex","labelDimIndex","normalModel","baseText","getFormattedLabel","get","defaultText","statesText","stateModel","setLabelStyle","targetEl","labelStatesModels","stateSpecified","isSetOnText","needsCreateText","getShallow","textContent","getTextContent","setTextContent","stateProxy","labelStatesTexts","showNormal","normalStyle","createTextStyle","setTextConfig","createTextConfig","stateObj","stateShow","ignore","targetElEmphasisState","textConfig","silent","x","y","useStyle","dirty","enableTextSetter","labelInner","getLabelStatesModels","itemModel","labelName","statesModels","getModel","textStyleModel","specifiedTextStyle","isNotNormal","isAttached","textStyle","setTextStyleCommon","labelPosition","labelRotate","labelDistance","labelOffset","defaultOutsidePosition","position","offset","Math","PI","rotation","distance","outsideFill","inheritColor","ecModel","globalTextStyle","option","richItemNames","getRichItemNames","richResult","name_1","hasOwnProperty","richTextStyle","setTokenTextStyle","rich","overflow","margin","richItemNameMap","richKeys","richKey","parentModel","TEXT_PROPS_WITH_GLOBAL","TEXT_PROPS_SELF","TEXT_PROPS_BOX","isBlock","inRich","fillColor","strokeColor","opacity","process","env","NODE_ENV","color","textBorderColor","fill","stroke","textBorderWidth","lineWidth","textBorderType","lineDash","textBorderDashOffset","lineDashOffset","defaultOpacity","key","val","verticalAlign","baseline","disableBox","borderType","borderDash","backgroundColor","borderColor","getFont","gTextStyleModel","fontStyle","fontWeight","fontSize","fontFamily","join","setLabelValueAnimation","value","getDefaultText","obj","prevValue","normalLabelModel","valueAnimation","precision","defaultInterpolatedText","animateLabelValue","textEl","dataIndex","data","animatableModel","labelInnerStore","currValue","targetValue","during","percent","interpolated","labelText"],"sources":["/home/siyi/Projects/radi-demo/radi-showing/node_modules/echarts/lib/label/labelStyle.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { isFunction, retrieve2, extend, keys, trim } from 'zrender/lib/core/util.js';\nimport { SPECIAL_STATES, DISPLAY_STATES } from '../util/states.js';\nimport { deprecateReplaceLog } from '../util/log.js';\nimport { makeInner, interpolateRawValues } from '../util/model.js';\nimport { initProps, updateProps } from '../util/graphic.js';\nvar EMPTY_OBJ = {};\nexport function setLabelText(label, labelTexts) {\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var text = labelTexts[stateName];\n    var state = label.ensureState(stateName);\n    state.style = state.style || {};\n    state.style.text = text;\n  }\n\n  var oldStates = label.currentStates.slice();\n  label.clearStates(true);\n  label.setStyle({\n    text: labelTexts.normal\n  });\n  label.useStates(oldStates, true);\n}\n\nfunction getLabelText(opt, stateModels, interpolatedValue) {\n  var labelFetcher = opt.labelFetcher;\n  var labelDataIndex = opt.labelDataIndex;\n  var labelDimIndex = opt.labelDimIndex;\n  var normalModel = stateModels.normal;\n  var baseText;\n\n  if (labelFetcher) {\n    baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, normalModel && normalModel.get('formatter'), interpolatedValue != null ? {\n      interpolatedValue: interpolatedValue\n    } : null);\n  }\n\n  if (baseText == null) {\n    baseText = isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt, interpolatedValue) : opt.defaultText;\n  }\n\n  var statesText = {\n    normal: baseText\n  };\n\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var stateModel = stateModels[stateName];\n    statesText[stateName] = retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, stateName, null, labelDimIndex, stateModel && stateModel.get('formatter')) : null, baseText);\n  }\n\n  return statesText;\n}\n\nfunction setLabelStyle(targetEl, labelStatesModels, opt, stateSpecified // TODO specified position?\n) {\n  opt = opt || EMPTY_OBJ;\n  var isSetOnText = targetEl instanceof ZRText;\n  var needsCreateText = false;\n\n  for (var i = 0; i < DISPLAY_STATES.length; i++) {\n    var stateModel = labelStatesModels[DISPLAY_STATES[i]];\n\n    if (stateModel && stateModel.getShallow('show')) {\n      needsCreateText = true;\n      break;\n    }\n  }\n\n  var textContent = isSetOnText ? targetEl : targetEl.getTextContent();\n\n  if (needsCreateText) {\n    if (!isSetOnText) {\n      // Reuse the previous\n      if (!textContent) {\n        textContent = new ZRText();\n        targetEl.setTextContent(textContent);\n      } // Use same state proxy\n\n\n      if (targetEl.stateProxy) {\n        textContent.stateProxy = targetEl.stateProxy;\n      }\n    }\n\n    var labelStatesTexts = getLabelText(opt, labelStatesModels);\n    var normalModel = labelStatesModels.normal;\n    var showNormal = !!normalModel.getShallow('show');\n    var normalStyle = createTextStyle(normalModel, stateSpecified && stateSpecified.normal, opt, false, !isSetOnText);\n    normalStyle.text = labelStatesTexts.normal;\n\n    if (!isSetOnText) {\n      // Always create new\n      targetEl.setTextConfig(createTextConfig(normalModel, opt, false));\n    }\n\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      var stateModel = labelStatesModels[stateName];\n\n      if (stateModel) {\n        var stateObj = textContent.ensureState(stateName);\n        var stateShow = !!retrieve2(stateModel.getShallow('show'), showNormal);\n\n        if (stateShow !== showNormal) {\n          stateObj.ignore = !stateShow;\n        }\n\n        stateObj.style = createTextStyle(stateModel, stateSpecified && stateSpecified[stateName], opt, true, !isSetOnText);\n        stateObj.style.text = labelStatesTexts[stateName];\n\n        if (!isSetOnText) {\n          var targetElEmphasisState = targetEl.ensureState(stateName);\n          targetElEmphasisState.textConfig = createTextConfig(stateModel, opt, true);\n        }\n      }\n    } // PENDING: if there is many requirements that emphasis position\n    // need to be different from normal position, we might consider\n    // auto slient is those cases.\n\n\n    textContent.silent = !!normalModel.getShallow('silent'); // Keep x and y\n\n    if (textContent.style.x != null) {\n      normalStyle.x = textContent.style.x;\n    }\n\n    if (textContent.style.y != null) {\n      normalStyle.y = textContent.style.y;\n    }\n\n    textContent.ignore = !showNormal; // Always create new style.\n\n    textContent.useStyle(normalStyle);\n    textContent.dirty();\n\n    if (opt.enableTextSetter) {\n      labelInner(textContent).setLabelText = function (interpolatedValue) {\n        var labelStatesTexts = getLabelText(opt, labelStatesModels, interpolatedValue);\n        setLabelText(textContent, labelStatesTexts);\n      };\n    }\n  } else if (textContent) {\n    // Not display rich text.\n    textContent.ignore = true;\n  }\n\n  targetEl.dirty();\n}\n\nexport { setLabelStyle };\nexport function getLabelStatesModels(itemModel, labelName) {\n  labelName = labelName || 'label';\n  var statesModels = {\n    normal: itemModel.getModel(labelName)\n  };\n\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    statesModels[stateName] = itemModel.getModel([stateName, labelName]);\n  }\n\n  return statesModels;\n}\n/**\n * Set basic textStyle properties.\n */\n\nexport function createTextStyle(textStyleModel, specifiedTextStyle, // Fixed style in the code. Can't be set by model.\nopt, isNotNormal, isAttached // If text is attached on an element. If so, auto color will handling in zrender.\n) {\n  var textStyle = {};\n  setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached);\n  specifiedTextStyle && extend(textStyle, specifiedTextStyle); // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n\n  return textStyle;\n}\nexport function createTextConfig(textStyleModel, opt, isNotNormal) {\n  opt = opt || {};\n  var textConfig = {};\n  var labelPosition;\n  var labelRotate = textStyleModel.getShallow('rotate');\n  var labelDistance = retrieve2(textStyleModel.getShallow('distance'), isNotNormal ? null : 5);\n  var labelOffset = textStyleModel.getShallow('offset');\n  labelPosition = textStyleModel.getShallow('position') || (isNotNormal ? null : 'inside'); // 'outside' is not a valid zr textPostion value, but used\n  // in bar series, and magric type should be considered.\n\n  labelPosition === 'outside' && (labelPosition = opt.defaultOutsidePosition || 'top');\n\n  if (labelPosition != null) {\n    textConfig.position = labelPosition;\n  }\n\n  if (labelOffset != null) {\n    textConfig.offset = labelOffset;\n  }\n\n  if (labelRotate != null) {\n    labelRotate *= Math.PI / 180;\n    textConfig.rotation = labelRotate;\n  }\n\n  if (labelDistance != null) {\n    textConfig.distance = labelDistance;\n  } // fill and auto is determined by the color of path fill if it's not specified by developers.\n\n\n  textConfig.outsideFill = textStyleModel.get('color') === 'inherit' ? opt.inheritColor || null : 'auto';\n  return textConfig;\n}\n/**\n * The uniform entry of set text style, that is, retrieve style definitions\n * from `model` and set to `textStyle` object.\n *\n * Never in merge mode, but in overwrite mode, that is, all of the text style\n * properties will be set. (Consider the states of normal and emphasis and\n * default value can be adopted, merge would make the logic too complicated\n * to manage.)\n */\n\nfunction setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached) {\n  // Consider there will be abnormal when merge hover style to normal style if given default value.\n  opt = opt || EMPTY_OBJ;\n  var ecModel = textStyleModel.ecModel;\n  var globalTextStyle = ecModel && ecModel.option.textStyle; // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             rich: {\n  //                 // no 'a' here but using parent 'a'.\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n\n  var richItemNames = getRichItemNames(textStyleModel);\n  var richResult;\n\n  if (richItemNames) {\n    richResult = {};\n\n    for (var name_1 in richItemNames) {\n      if (richItemNames.hasOwnProperty(name_1)) {\n        // Cascade is supported in rich.\n        var richTextStyle = textStyleModel.getModel(['rich', name_1]); // In rich, never `disableBox`.\n        // FIXME: consider `label: {formatter: '{a|xx}', color: 'blue', rich: {a: {}}}`,\n        // the default color `'blue'` will not be adopted if no color declared in `rich`.\n        // That might confuses users. So probably we should put `textStyleModel` as the\n        // root ancestor of the `richTextStyle`. But that would be a break change.\n\n        setTokenTextStyle(richResult[name_1] = {}, richTextStyle, globalTextStyle, opt, isNotNormal, isAttached, false, true);\n      }\n    }\n  }\n\n  if (richResult) {\n    textStyle.rich = richResult;\n  }\n\n  var overflow = textStyleModel.get('overflow');\n\n  if (overflow) {\n    textStyle.overflow = overflow;\n  }\n\n  var margin = textStyleModel.get('minMargin');\n\n  if (margin != null) {\n    textStyle.margin = margin;\n  }\n\n  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, true, false);\n} // Consider case:\n// {\n//     data: [{\n//         value: 12,\n//         label: {\n//             rich: {\n//                 // no 'a' here but using parent 'a'.\n//             }\n//         }\n//     }],\n//     rich: {\n//         a: { ... }\n//     }\n// }\n// TODO TextStyleModel\n\n\nfunction getRichItemNames(textStyleModel) {\n  // Use object to remove duplicated names.\n  var richItemNameMap;\n\n  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n    var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n\n    if (rich) {\n      richItemNameMap = richItemNameMap || {};\n      var richKeys = keys(rich);\n\n      for (var i = 0; i < richKeys.length; i++) {\n        var richKey = richKeys[i];\n        richItemNameMap[richKey] = 1;\n      }\n    }\n\n    textStyleModel = textStyleModel.parentModel;\n  }\n\n  return richItemNameMap;\n}\n\nvar TEXT_PROPS_WITH_GLOBAL = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'];\nvar TEXT_PROPS_SELF = ['align', 'lineHeight', 'width', 'height', 'tag', 'verticalAlign'];\nvar TEXT_PROPS_BOX = ['padding', 'borderWidth', 'borderRadius', 'borderDashOffset', 'backgroundColor', 'borderColor', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n\nfunction setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, isBlock, inRich) {\n  // In merge mode, default value should not be given.\n  globalTextStyle = !isNotNormal && globalTextStyle || EMPTY_OBJ;\n  var inheritColor = opt && opt.inheritColor;\n  var fillColor = textStyleModel.getShallow('color');\n  var strokeColor = textStyleModel.getShallow('textBorderColor');\n  var opacity = retrieve2(textStyleModel.getShallow('opacity'), globalTextStyle.opacity);\n\n  if (fillColor === 'inherit' || fillColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (fillColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n\n    if (inheritColor) {\n      fillColor = inheritColor;\n    } else {\n      fillColor = null;\n    }\n  }\n\n  if (strokeColor === 'inherit' || strokeColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (strokeColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n\n    if (inheritColor) {\n      strokeColor = inheritColor;\n    } else {\n      strokeColor = null;\n    }\n  }\n\n  if (!isAttached) {\n    // Only use default global textStyle.color if text is individual.\n    // Otherwise it will use the strategy of attached text color because text may be on a path.\n    fillColor = fillColor || globalTextStyle.color;\n    strokeColor = strokeColor || globalTextStyle.textBorderColor;\n  }\n\n  if (fillColor != null) {\n    textStyle.fill = fillColor;\n  }\n\n  if (strokeColor != null) {\n    textStyle.stroke = strokeColor;\n  }\n\n  var textBorderWidth = retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n\n  if (textBorderWidth != null) {\n    textStyle.lineWidth = textBorderWidth;\n  }\n\n  var textBorderType = retrieve2(textStyleModel.getShallow('textBorderType'), globalTextStyle.textBorderType);\n\n  if (textBorderType != null) {\n    textStyle.lineDash = textBorderType;\n  }\n\n  var textBorderDashOffset = retrieve2(textStyleModel.getShallow('textBorderDashOffset'), globalTextStyle.textBorderDashOffset);\n\n  if (textBorderDashOffset != null) {\n    textStyle.lineDashOffset = textBorderDashOffset;\n  }\n\n  if (!isNotNormal && opacity == null && !inRich) {\n    opacity = opt && opt.defaultOpacity;\n  }\n\n  if (opacity != null) {\n    textStyle.opacity = opacity;\n  } // TODO\n\n\n  if (!isNotNormal && !isAttached) {\n    // Set default finally.\n    if (textStyle.fill == null && opt.inheritColor) {\n      textStyle.fill = opt.inheritColor;\n    }\n  } // Do not use `getFont` here, because merge should be supported, where\n  // part of these properties may be changed in emphasis style, and the\n  // others should remain their original value got from normal style.\n\n\n  for (var i = 0; i < TEXT_PROPS_WITH_GLOBAL.length; i++) {\n    var key = TEXT_PROPS_WITH_GLOBAL[i];\n    var val = retrieve2(textStyleModel.getShallow(key), globalTextStyle[key]);\n\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n\n  for (var i = 0; i < TEXT_PROPS_SELF.length; i++) {\n    var key = TEXT_PROPS_SELF[i];\n    var val = textStyleModel.getShallow(key);\n\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n\n  if (textStyle.verticalAlign == null) {\n    var baseline = textStyleModel.getShallow('baseline');\n\n    if (baseline != null) {\n      textStyle.verticalAlign = baseline;\n    }\n  }\n\n  if (!isBlock || !opt.disableBox) {\n    for (var i = 0; i < TEXT_PROPS_BOX.length; i++) {\n      var key = TEXT_PROPS_BOX[i];\n      var val = textStyleModel.getShallow(key);\n\n      if (val != null) {\n        textStyle[key] = val;\n      }\n    }\n\n    var borderType = textStyleModel.getShallow('borderType');\n\n    if (borderType != null) {\n      textStyle.borderDash = borderType;\n    }\n\n    if ((textStyle.backgroundColor === 'auto' || textStyle.backgroundColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.backgroundColor === 'auto') {\n          deprecateReplaceLog('backgroundColor: \\'auto\\'', 'backgroundColor: \\'inherit\\'');\n        }\n      }\n\n      textStyle.backgroundColor = inheritColor;\n    }\n\n    if ((textStyle.borderColor === 'auto' || textStyle.borderColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.borderColor === 'auto') {\n          deprecateReplaceLog('borderColor: \\'auto\\'', 'borderColor: \\'inherit\\'');\n        }\n      }\n\n      textStyle.borderColor = inheritColor;\n    }\n  }\n}\n\nexport function getFont(opt, ecModel) {\n  var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\n  return trim([// FIXME in node-canvas fontWeight is before fontStyle\n  opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\n}\nexport var labelInner = makeInner();\nexport function setLabelValueAnimation(label, labelStatesModels, value, getDefaultText) {\n  if (!label) {\n    return;\n  }\n\n  var obj = labelInner(label);\n  obj.prevValue = obj.value;\n  obj.value = value;\n  var normalLabelModel = labelStatesModels.normal;\n  obj.valueAnimation = normalLabelModel.get('valueAnimation');\n\n  if (obj.valueAnimation) {\n    obj.precision = normalLabelModel.get('precision');\n    obj.defaultInterpolatedText = getDefaultText;\n    obj.statesModels = labelStatesModels;\n  }\n}\nexport function animateLabelValue(textEl, dataIndex, data, animatableModel, labelFetcher) {\n  var labelInnerStore = labelInner(textEl);\n\n  if (!labelInnerStore.valueAnimation || labelInnerStore.prevValue === labelInnerStore.value) {\n    // Value not changed, no new label animation\n    return;\n  }\n\n  var defaultInterpolatedText = labelInnerStore.defaultInterpolatedText; // Consider the case that being animating, do not use the `obj.value`,\n  // Otherwise it will jump to the `obj.value` when this new animation started.\n\n  var currValue = retrieve2(labelInnerStore.interpolatedValue, labelInnerStore.prevValue);\n  var targetValue = labelInnerStore.value;\n\n  function during(percent) {\n    var interpolated = interpolateRawValues(data, labelInnerStore.precision, currValue, targetValue, percent);\n    labelInnerStore.interpolatedValue = percent === 1 ? null : interpolated;\n    var labelText = getLabelText({\n      labelDataIndex: dataIndex,\n      labelFetcher: labelFetcher,\n      defaultText: defaultInterpolatedText ? defaultInterpolatedText(interpolated) : interpolated + ''\n    }, labelInnerStore.statesModels, interpolated);\n    setLabelText(textEl, labelText);\n  }\n\n  textEl.percent = 0;\n  (labelInnerStore.prevValue == null ? initProps : updateProps)(textEl, {\n    // percent is used to prevent animation from being aborted #15916\n    percent: 1\n  }, animatableModel, dataIndex, null, during);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}
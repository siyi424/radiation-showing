{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js'; // FIXME 公用？\n\nfunction dataStatistics(datas, statisticType) {\n  var dataNameMap = {};\n  zrUtil.each(datas, function (data) {\n    data.each(data.mapDimension('value'), function (value, idx) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var mapKey = 'ec-' + data.getName(idx);\n      dataNameMap[mapKey] = dataNameMap[mapKey] || [];\n\n      if (!isNaN(value)) {\n        dataNameMap[mapKey].push(value);\n      }\n    });\n  });\n  return datas[0].map(datas[0].mapDimension('value'), function (value, idx) {\n    var mapKey = 'ec-' + datas[0].getName(idx);\n    var sum = 0;\n    var min = Infinity;\n    var max = -Infinity;\n    var len = dataNameMap[mapKey].length;\n\n    for (var i = 0; i < len; i++) {\n      min = Math.min(min, dataNameMap[mapKey][i]);\n      max = Math.max(max, dataNameMap[mapKey][i]);\n      sum += dataNameMap[mapKey][i];\n    }\n\n    var result;\n\n    if (statisticType === 'min') {\n      result = min;\n    } else if (statisticType === 'max') {\n      result = max;\n    } else if (statisticType === 'average') {\n      result = sum / len;\n    } else {\n      result = sum;\n    }\n\n    return len === 0 ? NaN : result;\n  });\n}\n\nexport default function mapDataStatistic(ecModel) {\n  var seriesGroups = {};\n  ecModel.eachSeriesByType('map', function (seriesModel) {\n    var hostGeoModel = seriesModel.getHostGeoModel();\n    var key = hostGeoModel ? 'o' + hostGeoModel.id : 'i' + seriesModel.getMapType();\n    (seriesGroups[key] = seriesGroups[key] || []).push(seriesModel);\n  });\n  zrUtil.each(seriesGroups, function (seriesList, key) {\n    var data = dataStatistics(zrUtil.map(seriesList, function (seriesModel) {\n      return seriesModel.getData();\n    }), seriesList[0].get('mapValueCalculation'));\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].originalData = seriesList[i].getData();\n    } // FIXME Put where?\n\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].seriesGroup = seriesList;\n      seriesList[i].needsDrawMap = i === 0 && !seriesList[i].getHostGeoModel();\n      seriesList[i].setData(data.cloneShallow());\n      seriesList[i].mainSeries = seriesList[0];\n    }\n  });\n}","map":{"version":3,"names":["zrUtil","dataStatistics","datas","statisticType","dataNameMap","each","data","mapDimension","value","idx","mapKey","getName","isNaN","push","map","sum","min","Infinity","max","len","length","i","Math","result","NaN","mapDataStatistic","ecModel","seriesGroups","eachSeriesByType","seriesModel","hostGeoModel","getHostGeoModel","key","id","getMapType","seriesList","getData","get","originalData","seriesGroup","needsDrawMap","setData","cloneShallow","mainSeries"],"sources":["/home/siyi/Projects/radi-demo/radi-showing/node_modules/echarts/lib/chart/map/mapDataStatistic.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js'; // FIXME 公用？\n\nfunction dataStatistics(datas, statisticType) {\n  var dataNameMap = {};\n  zrUtil.each(datas, function (data) {\n    data.each(data.mapDimension('value'), function (value, idx) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var mapKey = 'ec-' + data.getName(idx);\n      dataNameMap[mapKey] = dataNameMap[mapKey] || [];\n\n      if (!isNaN(value)) {\n        dataNameMap[mapKey].push(value);\n      }\n    });\n  });\n  return datas[0].map(datas[0].mapDimension('value'), function (value, idx) {\n    var mapKey = 'ec-' + datas[0].getName(idx);\n    var sum = 0;\n    var min = Infinity;\n    var max = -Infinity;\n    var len = dataNameMap[mapKey].length;\n\n    for (var i = 0; i < len; i++) {\n      min = Math.min(min, dataNameMap[mapKey][i]);\n      max = Math.max(max, dataNameMap[mapKey][i]);\n      sum += dataNameMap[mapKey][i];\n    }\n\n    var result;\n\n    if (statisticType === 'min') {\n      result = min;\n    } else if (statisticType === 'max') {\n      result = max;\n    } else if (statisticType === 'average') {\n      result = sum / len;\n    } else {\n      result = sum;\n    }\n\n    return len === 0 ? NaN : result;\n  });\n}\n\nexport default function mapDataStatistic(ecModel) {\n  var seriesGroups = {};\n  ecModel.eachSeriesByType('map', function (seriesModel) {\n    var hostGeoModel = seriesModel.getHostGeoModel();\n    var key = hostGeoModel ? 'o' + hostGeoModel.id : 'i' + seriesModel.getMapType();\n    (seriesGroups[key] = seriesGroups[key] || []).push(seriesModel);\n  });\n  zrUtil.each(seriesGroups, function (seriesList, key) {\n    var data = dataStatistics(zrUtil.map(seriesList, function (seriesModel) {\n      return seriesModel.getData();\n    }), seriesList[0].get('mapValueCalculation'));\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].originalData = seriesList[i].getData();\n    } // FIXME Put where?\n\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].seriesGroup = seriesList;\n      seriesList[i].needsDrawMap = i === 0 && !seriesList[i].getHostGeoModel();\n      seriesList[i].setData(data.cloneShallow());\n      seriesList[i].mainSeries = seriesList[0];\n    }\n  });\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}
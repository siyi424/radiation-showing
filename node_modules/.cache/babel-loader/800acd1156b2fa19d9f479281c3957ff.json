{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS } from '../../util/types.js';\nimport { makePrintable, throwError } from '../../util/log.js';\nimport { each } from 'zrender/lib/core/util.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { getRawValueParser, SortOrderComparator } from '../../data/helper/dataValueHelper.js';\nvar sampleLog = '';\n\nif (process.env.NODE_ENV !== 'production') {\n  sampleLog = ['Valid config is like:', '{ dimension: \"age\", order: \"asc\" }', 'or [{ dimension: \"age\", order: \"asc\"], { dimension: \"date\", order: \"desc\" }]'].join(' ');\n}\n\nexport var sortTransform = {\n  type: 'echarts:sort',\n  transform: function (params) {\n    var upstream = params.upstream;\n    var config = params.config;\n    var errMsg = ''; // Normalize\n    // const orderExprList: OrderExpression[] = isArray(config[0])\n    //     ? config as OrderExpression[]\n    //     : [config as OrderExpression];\n\n    var orderExprList = normalizeToArray(config);\n\n    if (!orderExprList.length) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Empty `config` in sort transform.';\n      }\n\n      throwError(errMsg);\n    }\n\n    var orderDefList = [];\n    each(orderExprList, function (orderExpr) {\n      var dimLoose = orderExpr.dimension;\n      var order = orderExpr.order;\n      var parserName = orderExpr.parser;\n      var incomparable = orderExpr.incomparable;\n\n      if (dimLoose == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"dimension\" specified.' + sampleLog;\n        }\n\n        throwError(errMsg);\n      }\n\n      if (order !== 'asc' && order !== 'desc') {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"order\" specified.' + sampleLog;\n        }\n\n        throwError(errMsg);\n      }\n\n      if (incomparable && incomparable !== 'min' && incomparable !== 'max') {\n        var errMsg_1 = '';\n\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_1 = 'incomparable must be \"min\" or \"max\" rather than \"' + incomparable + '\".';\n        }\n\n        throwError(errMsg_1);\n      }\n\n      if (order !== 'asc' && order !== 'desc') {\n        var errMsg_2 = '';\n\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_2 = 'order must be \"asc\" or \"desc\" rather than \"' + order + '\".';\n        }\n\n        throwError(errMsg_2);\n      }\n\n      var dimInfo = upstream.getDimensionInfo(dimLoose);\n\n      if (!dimInfo) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n\n        throwError(errMsg);\n      }\n\n      var parser = parserName ? getRawValueParser(parserName) : null;\n\n      if (parserName && !parser) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Invalid parser name ' + parserName + '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n\n        throwError(errMsg);\n      }\n\n      orderDefList.push({\n        dimIdx: dimInfo.index,\n        parser: parser,\n        comparator: new SortOrderComparator(order, incomparable)\n      });\n    }); // TODO: support it?\n\n    var sourceFormat = upstream.sourceFormat;\n\n    if (sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'sourceFormat \"' + sourceFormat + '\" is not supported yet';\n      }\n\n      throwError(errMsg);\n    } // Other upstream format are all array.\n\n\n    var resultData = [];\n\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      resultData.push(upstream.getRawDataItem(i));\n    }\n\n    resultData.sort(function (item0, item1) {\n      for (var i = 0; i < orderDefList.length; i++) {\n        var orderDef = orderDefList[i];\n        var val0 = upstream.retrieveValueFromItem(item0, orderDef.dimIdx);\n        var val1 = upstream.retrieveValueFromItem(item1, orderDef.dimIdx);\n\n        if (orderDef.parser) {\n          val0 = orderDef.parser(val0);\n          val1 = orderDef.parser(val1);\n        }\n\n        var result = orderDef.comparator.evaluate(val0, val1);\n\n        if (result !== 0) {\n          return result;\n        }\n      }\n\n      return 0;\n    });\n    return {\n      data: resultData\n    };\n  }\n};","map":{"version":3,"names":["SOURCE_FORMAT_ARRAY_ROWS","SOURCE_FORMAT_OBJECT_ROWS","makePrintable","throwError","each","normalizeToArray","getRawValueParser","SortOrderComparator","sampleLog","process","env","NODE_ENV","join","sortTransform","type","transform","params","upstream","config","errMsg","orderExprList","length","orderDefList","orderExpr","dimLoose","dimension","order","parserName","parser","incomparable","errMsg_1","errMsg_2","dimInfo","getDimensionInfo","cloneAllDimensionInfo","push","dimIdx","index","comparator","sourceFormat","resultData","i","len","count","getRawDataItem","sort","item0","item1","orderDef","val0","retrieveValueFromItem","val1","result","evaluate","data"],"sources":["/home/siyi/Projects/radi-demo/radi-showing/node_modules/echarts/lib/component/transform/sortTransform.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS } from '../../util/types.js';\nimport { makePrintable, throwError } from '../../util/log.js';\nimport { each } from 'zrender/lib/core/util.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { getRawValueParser, SortOrderComparator } from '../../data/helper/dataValueHelper.js';\nvar sampleLog = '';\n\nif (process.env.NODE_ENV !== 'production') {\n  sampleLog = ['Valid config is like:', '{ dimension: \"age\", order: \"asc\" }', 'or [{ dimension: \"age\", order: \"asc\"], { dimension: \"date\", order: \"desc\" }]'].join(' ');\n}\n\nexport var sortTransform = {\n  type: 'echarts:sort',\n  transform: function (params) {\n    var upstream = params.upstream;\n    var config = params.config;\n    var errMsg = ''; // Normalize\n    // const orderExprList: OrderExpression[] = isArray(config[0])\n    //     ? config as OrderExpression[]\n    //     : [config as OrderExpression];\n\n    var orderExprList = normalizeToArray(config);\n\n    if (!orderExprList.length) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Empty `config` in sort transform.';\n      }\n\n      throwError(errMsg);\n    }\n\n    var orderDefList = [];\n    each(orderExprList, function (orderExpr) {\n      var dimLoose = orderExpr.dimension;\n      var order = orderExpr.order;\n      var parserName = orderExpr.parser;\n      var incomparable = orderExpr.incomparable;\n\n      if (dimLoose == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"dimension\" specified.' + sampleLog;\n        }\n\n        throwError(errMsg);\n      }\n\n      if (order !== 'asc' && order !== 'desc') {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"order\" specified.' + sampleLog;\n        }\n\n        throwError(errMsg);\n      }\n\n      if (incomparable && incomparable !== 'min' && incomparable !== 'max') {\n        var errMsg_1 = '';\n\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_1 = 'incomparable must be \"min\" or \"max\" rather than \"' + incomparable + '\".';\n        }\n\n        throwError(errMsg_1);\n      }\n\n      if (order !== 'asc' && order !== 'desc') {\n        var errMsg_2 = '';\n\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_2 = 'order must be \"asc\" or \"desc\" rather than \"' + order + '\".';\n        }\n\n        throwError(errMsg_2);\n      }\n\n      var dimInfo = upstream.getDimensionInfo(dimLoose);\n\n      if (!dimInfo) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n\n        throwError(errMsg);\n      }\n\n      var parser = parserName ? getRawValueParser(parserName) : null;\n\n      if (parserName && !parser) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Invalid parser name ' + parserName + '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n\n        throwError(errMsg);\n      }\n\n      orderDefList.push({\n        dimIdx: dimInfo.index,\n        parser: parser,\n        comparator: new SortOrderComparator(order, incomparable)\n      });\n    }); // TODO: support it?\n\n    var sourceFormat = upstream.sourceFormat;\n\n    if (sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'sourceFormat \"' + sourceFormat + '\" is not supported yet';\n      }\n\n      throwError(errMsg);\n    } // Other upstream format are all array.\n\n\n    var resultData = [];\n\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      resultData.push(upstream.getRawDataItem(i));\n    }\n\n    resultData.sort(function (item0, item1) {\n      for (var i = 0; i < orderDefList.length; i++) {\n        var orderDef = orderDefList[i];\n        var val0 = upstream.retrieveValueFromItem(item0, orderDef.dimIdx);\n        var val1 = upstream.retrieveValueFromItem(item1, orderDef.dimIdx);\n\n        if (orderDef.parser) {\n          val0 = orderDef.parser(val0);\n          val1 = orderDef.parser(val1);\n        }\n\n        var result = orderDef.comparator.evaluate(val0, val1);\n\n        if (result !== 0) {\n          return result;\n        }\n      }\n\n      return 0;\n    });\n    return {\n      data: resultData\n    };\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { keys, filter, each, isArray, indexOf } from 'zrender/lib/core/util.js';\nimport { ELEMENT_ANIMATABLE_PROPS } from './customGraphicTransition.js';\nimport { getAnimationConfig } from './basicTrasition.js';\nimport { warn } from '../util/log.js';\nimport { makeInner } from '../util/model.js';\nvar getStateToRestore = makeInner();\nvar KEYFRAME_EXCLUDE_KEYS = ['percent', 'easing', 'shape', 'style', 'extra'];\n/**\n * Stop previous keyframe animation and restore the attributes.\n * Avoid new keyframe animation starts with wrong internal state when the percent: 0 is not set.\n */\n\nexport function stopPreviousKeyframeAnimationAndRestore(el) {\n  // Stop previous keyframe animation.\n  el.stopAnimation('keyframe'); // Restore\n\n  el.attr(getStateToRestore(el));\n}\nexport function applyKeyframeAnimation(el, animationOpts, animatableModel) {\n  if (!animatableModel.isAnimationEnabled() || !animationOpts) {\n    return;\n  }\n\n  if (isArray(animationOpts)) {\n    each(animationOpts, function (singleAnimationOpts) {\n      applyKeyframeAnimation(el, singleAnimationOpts, animatableModel);\n    });\n    return;\n  }\n\n  var keyframes = animationOpts.keyframes;\n  var duration = animationOpts.duration;\n\n  if (animatableModel && duration == null) {\n    // Default to use duration of config.\n    // NOTE: animation config from payload will be ignored because they are mainly for transitions.\n    var config = getAnimationConfig('enter', animatableModel, 0);\n    duration = config && config.duration;\n  }\n\n  if (!keyframes || !duration) {\n    return;\n  }\n\n  var stateToRestore = getStateToRestore(el);\n  each(ELEMENT_ANIMATABLE_PROPS, function (targetPropName) {\n    if (targetPropName && !el[targetPropName]) {\n      return;\n    }\n\n    var animator;\n    var endFrameIsSet = false; // Sort keyframes by percent.\n\n    keyframes.sort(function (a, b) {\n      return a.percent - b.percent;\n    });\n    each(keyframes, function (kf) {\n      // Stop current animation.\n      var animators = el.animators;\n      var kfValues = targetPropName ? kf[targetPropName] : kf;\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (kf.percent >= 1) {\n          endFrameIsSet = true;\n        }\n      }\n\n      if (!kfValues) {\n        return;\n      }\n\n      var propKeys = keys(kfValues);\n\n      if (!targetPropName) {\n        // PENDING performance?\n        propKeys = filter(propKeys, function (key) {\n          return indexOf(KEYFRAME_EXCLUDE_KEYS, key) < 0;\n        });\n      }\n\n      if (!propKeys.length) {\n        return;\n      }\n\n      if (!animator) {\n        animator = el.animate(targetPropName, animationOpts.loop, true);\n        animator.scope = 'keyframe';\n      }\n\n      for (var i = 0; i < animators.length; i++) {\n        // Stop all other animation that is not keyframe.\n        if (animators[i] !== animator && animators[i].targetName === animator.targetName) {\n          animators[i].stopTracks(propKeys);\n        }\n      }\n\n      targetPropName && (stateToRestore[targetPropName] = stateToRestore[targetPropName] || {});\n      var savedTarget = targetPropName ? stateToRestore[targetPropName] : stateToRestore;\n      each(propKeys, function (key) {\n        // Save original value.\n        savedTarget[key] = ((targetPropName ? el[targetPropName] : el) || {})[key];\n      });\n      animator.whenWithKeys(duration * kf.percent, kfValues, propKeys, kf.easing);\n    });\n\n    if (!animator) {\n      return;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!endFrameIsSet) {\n        warn('End frame with percent: 1 is missing in the keyframeAnimation.', true);\n      }\n    }\n\n    animator.delay(animationOpts.delay || 0).duration(duration).start(animationOpts.easing);\n  });\n}","map":{"version":3,"names":["keys","filter","each","isArray","indexOf","ELEMENT_ANIMATABLE_PROPS","getAnimationConfig","warn","makeInner","getStateToRestore","KEYFRAME_EXCLUDE_KEYS","stopPreviousKeyframeAnimationAndRestore","el","stopAnimation","attr","applyKeyframeAnimation","animationOpts","animatableModel","isAnimationEnabled","singleAnimationOpts","keyframes","duration","config","stateToRestore","targetPropName","animator","endFrameIsSet","sort","a","b","percent","kf","animators","kfValues","process","env","NODE_ENV","propKeys","key","length","animate","loop","scope","i","targetName","stopTracks","savedTarget","whenWithKeys","easing","delay","start"],"sources":["/home/siyi/Projects/radi-demo/radi-showing/node_modules/echarts/lib/animation/customGraphicKeyframeAnimation.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { keys, filter, each, isArray, indexOf } from 'zrender/lib/core/util.js';\nimport { ELEMENT_ANIMATABLE_PROPS } from './customGraphicTransition.js';\nimport { getAnimationConfig } from './basicTrasition.js';\nimport { warn } from '../util/log.js';\nimport { makeInner } from '../util/model.js';\nvar getStateToRestore = makeInner();\nvar KEYFRAME_EXCLUDE_KEYS = ['percent', 'easing', 'shape', 'style', 'extra'];\n/**\n * Stop previous keyframe animation and restore the attributes.\n * Avoid new keyframe animation starts with wrong internal state when the percent: 0 is not set.\n */\n\nexport function stopPreviousKeyframeAnimationAndRestore(el) {\n  // Stop previous keyframe animation.\n  el.stopAnimation('keyframe'); // Restore\n\n  el.attr(getStateToRestore(el));\n}\nexport function applyKeyframeAnimation(el, animationOpts, animatableModel) {\n  if (!animatableModel.isAnimationEnabled() || !animationOpts) {\n    return;\n  }\n\n  if (isArray(animationOpts)) {\n    each(animationOpts, function (singleAnimationOpts) {\n      applyKeyframeAnimation(el, singleAnimationOpts, animatableModel);\n    });\n    return;\n  }\n\n  var keyframes = animationOpts.keyframes;\n  var duration = animationOpts.duration;\n\n  if (animatableModel && duration == null) {\n    // Default to use duration of config.\n    // NOTE: animation config from payload will be ignored because they are mainly for transitions.\n    var config = getAnimationConfig('enter', animatableModel, 0);\n    duration = config && config.duration;\n  }\n\n  if (!keyframes || !duration) {\n    return;\n  }\n\n  var stateToRestore = getStateToRestore(el);\n  each(ELEMENT_ANIMATABLE_PROPS, function (targetPropName) {\n    if (targetPropName && !el[targetPropName]) {\n      return;\n    }\n\n    var animator;\n    var endFrameIsSet = false; // Sort keyframes by percent.\n\n    keyframes.sort(function (a, b) {\n      return a.percent - b.percent;\n    });\n    each(keyframes, function (kf) {\n      // Stop current animation.\n      var animators = el.animators;\n      var kfValues = targetPropName ? kf[targetPropName] : kf;\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (kf.percent >= 1) {\n          endFrameIsSet = true;\n        }\n      }\n\n      if (!kfValues) {\n        return;\n      }\n\n      var propKeys = keys(kfValues);\n\n      if (!targetPropName) {\n        // PENDING performance?\n        propKeys = filter(propKeys, function (key) {\n          return indexOf(KEYFRAME_EXCLUDE_KEYS, key) < 0;\n        });\n      }\n\n      if (!propKeys.length) {\n        return;\n      }\n\n      if (!animator) {\n        animator = el.animate(targetPropName, animationOpts.loop, true);\n        animator.scope = 'keyframe';\n      }\n\n      for (var i = 0; i < animators.length; i++) {\n        // Stop all other animation that is not keyframe.\n        if (animators[i] !== animator && animators[i].targetName === animator.targetName) {\n          animators[i].stopTracks(propKeys);\n        }\n      }\n\n      targetPropName && (stateToRestore[targetPropName] = stateToRestore[targetPropName] || {});\n      var savedTarget = targetPropName ? stateToRestore[targetPropName] : stateToRestore;\n      each(propKeys, function (key) {\n        // Save original value.\n        savedTarget[key] = ((targetPropName ? el[targetPropName] : el) || {})[key];\n      });\n      animator.whenWithKeys(duration * kf.percent, kfValues, propKeys, kf.easing);\n    });\n\n    if (!animator) {\n      return;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!endFrameIsSet) {\n        warn('End frame with percent: 1 is missing in the keyframeAnimation.', true);\n      }\n    }\n\n    animator.delay(animationOpts.delay || 0).duration(duration).start(animationOpts.easing);\n  });\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}
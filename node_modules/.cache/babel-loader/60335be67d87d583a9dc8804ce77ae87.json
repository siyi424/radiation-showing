{"ast":null,"code":"var Eventful = function () {\n  function Eventful(eventProcessors) {\n    if (eventProcessors) {\n      this._$eventProcessor = eventProcessors;\n    }\n  }\n\n  Eventful.prototype.on = function (event, query, handler, context) {\n    if (!this._$handlers) {\n      this._$handlers = {};\n    }\n\n    var _h = this._$handlers;\n\n    if (typeof query === 'function') {\n      context = handler;\n      handler = query;\n      query = null;\n    }\n\n    if (!handler || !event) {\n      return this;\n    }\n\n    var eventProcessor = this._$eventProcessor;\n\n    if (query != null && eventProcessor && eventProcessor.normalizeQuery) {\n      query = eventProcessor.normalizeQuery(query);\n    }\n\n    if (!_h[event]) {\n      _h[event] = [];\n    }\n\n    for (var i = 0; i < _h[event].length; i++) {\n      if (_h[event][i].h === handler) {\n        return this;\n      }\n    }\n\n    var wrap = {\n      h: handler,\n      query: query,\n      ctx: context || this,\n      callAtLast: handler.zrEventfulCallAtLast\n    };\n    var lastIndex = _h[event].length - 1;\n    var lastWrap = _h[event][lastIndex];\n    lastWrap && lastWrap.callAtLast ? _h[event].splice(lastIndex, 0, wrap) : _h[event].push(wrap);\n    return this;\n  };\n\n  Eventful.prototype.isSilent = function (eventName) {\n    var _h = this._$handlers;\n    return !_h || !_h[eventName] || !_h[eventName].length;\n  };\n\n  Eventful.prototype.off = function (eventType, handler) {\n    var _h = this._$handlers;\n\n    if (!_h) {\n      return this;\n    }\n\n    if (!eventType) {\n      this._$handlers = {};\n      return this;\n    }\n\n    if (handler) {\n      if (_h[eventType]) {\n        var newList = [];\n\n        for (var i = 0, l = _h[eventType].length; i < l; i++) {\n          if (_h[eventType][i].h !== handler) {\n            newList.push(_h[eventType][i]);\n          }\n        }\n\n        _h[eventType] = newList;\n      }\n\n      if (_h[eventType] && _h[eventType].length === 0) {\n        delete _h[eventType];\n      }\n    } else {\n      delete _h[eventType];\n    }\n\n    return this;\n  };\n\n  Eventful.prototype.trigger = function (eventType) {\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n\n    if (!this._$handlers) {\n      return this;\n    }\n\n    var _h = this._$handlers[eventType];\n    var eventProcessor = this._$eventProcessor;\n\n    if (_h) {\n      var argLen = args.length;\n      var len = _h.length;\n\n      for (var i = 0; i < len; i++) {\n        var hItem = _h[i];\n\n        if (eventProcessor && eventProcessor.filter && hItem.query != null && !eventProcessor.filter(eventType, hItem.query)) {\n          continue;\n        }\n\n        switch (argLen) {\n          case 0:\n            hItem.h.call(hItem.ctx);\n            break;\n\n          case 1:\n            hItem.h.call(hItem.ctx, args[0]);\n            break;\n\n          case 2:\n            hItem.h.call(hItem.ctx, args[0], args[1]);\n            break;\n\n          default:\n            hItem.h.apply(hItem.ctx, args);\n            break;\n        }\n      }\n    }\n\n    eventProcessor && eventProcessor.afterTrigger && eventProcessor.afterTrigger(eventType);\n    return this;\n  };\n\n  Eventful.prototype.triggerWithContext = function (type) {\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n\n    if (!this._$handlers) {\n      return this;\n    }\n\n    var _h = this._$handlers[type];\n    var eventProcessor = this._$eventProcessor;\n\n    if (_h) {\n      var argLen = args.length;\n      var ctx = args[argLen - 1];\n      var len = _h.length;\n\n      for (var i = 0; i < len; i++) {\n        var hItem = _h[i];\n\n        if (eventProcessor && eventProcessor.filter && hItem.query != null && !eventProcessor.filter(type, hItem.query)) {\n          continue;\n        }\n\n        switch (argLen) {\n          case 0:\n            hItem.h.call(ctx);\n            break;\n\n          case 1:\n            hItem.h.call(ctx, args[0]);\n            break;\n\n          case 2:\n            hItem.h.call(ctx, args[0], args[1]);\n            break;\n\n          default:\n            hItem.h.apply(ctx, args.slice(1, argLen - 1));\n            break;\n        }\n      }\n    }\n\n    eventProcessor && eventProcessor.afterTrigger && eventProcessor.afterTrigger(type);\n    return this;\n  };\n\n  return Eventful;\n}();\n\nexport default Eventful;","map":{"version":3,"names":["Eventful","eventProcessors","_$eventProcessor","prototype","on","event","query","handler","context","_$handlers","_h","eventProcessor","normalizeQuery","i","length","h","wrap","ctx","callAtLast","zrEventfulCallAtLast","lastIndex","lastWrap","splice","push","isSilent","eventName","off","eventType","newList","l","trigger","args","_i","arguments","argLen","len","hItem","filter","call","apply","afterTrigger","triggerWithContext","type","slice"],"sources":["/home/siyi/Projects/radi-demo/radi-showing/node_modules/zrender/lib/core/Eventful.js"],"sourcesContent":["var Eventful = (function () {\n    function Eventful(eventProcessors) {\n        if (eventProcessors) {\n            this._$eventProcessor = eventProcessors;\n        }\n    }\n    Eventful.prototype.on = function (event, query, handler, context) {\n        if (!this._$handlers) {\n            this._$handlers = {};\n        }\n        var _h = this._$handlers;\n        if (typeof query === 'function') {\n            context = handler;\n            handler = query;\n            query = null;\n        }\n        if (!handler || !event) {\n            return this;\n        }\n        var eventProcessor = this._$eventProcessor;\n        if (query != null && eventProcessor && eventProcessor.normalizeQuery) {\n            query = eventProcessor.normalizeQuery(query);\n        }\n        if (!_h[event]) {\n            _h[event] = [];\n        }\n        for (var i = 0; i < _h[event].length; i++) {\n            if (_h[event][i].h === handler) {\n                return this;\n            }\n        }\n        var wrap = {\n            h: handler,\n            query: query,\n            ctx: (context || this),\n            callAtLast: handler.zrEventfulCallAtLast\n        };\n        var lastIndex = _h[event].length - 1;\n        var lastWrap = _h[event][lastIndex];\n        (lastWrap && lastWrap.callAtLast)\n            ? _h[event].splice(lastIndex, 0, wrap)\n            : _h[event].push(wrap);\n        return this;\n    };\n    Eventful.prototype.isSilent = function (eventName) {\n        var _h = this._$handlers;\n        return !_h || !_h[eventName] || !_h[eventName].length;\n    };\n    Eventful.prototype.off = function (eventType, handler) {\n        var _h = this._$handlers;\n        if (!_h) {\n            return this;\n        }\n        if (!eventType) {\n            this._$handlers = {};\n            return this;\n        }\n        if (handler) {\n            if (_h[eventType]) {\n                var newList = [];\n                for (var i = 0, l = _h[eventType].length; i < l; i++) {\n                    if (_h[eventType][i].h !== handler) {\n                        newList.push(_h[eventType][i]);\n                    }\n                }\n                _h[eventType] = newList;\n            }\n            if (_h[eventType] && _h[eventType].length === 0) {\n                delete _h[eventType];\n            }\n        }\n        else {\n            delete _h[eventType];\n        }\n        return this;\n    };\n    Eventful.prototype.trigger = function (eventType) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._$handlers) {\n            return this;\n        }\n        var _h = this._$handlers[eventType];\n        var eventProcessor = this._$eventProcessor;\n        if (_h) {\n            var argLen = args.length;\n            var len = _h.length;\n            for (var i = 0; i < len; i++) {\n                var hItem = _h[i];\n                if (eventProcessor\n                    && eventProcessor.filter\n                    && hItem.query != null\n                    && !eventProcessor.filter(eventType, hItem.query)) {\n                    continue;\n                }\n                switch (argLen) {\n                    case 0:\n                        hItem.h.call(hItem.ctx);\n                        break;\n                    case 1:\n                        hItem.h.call(hItem.ctx, args[0]);\n                        break;\n                    case 2:\n                        hItem.h.call(hItem.ctx, args[0], args[1]);\n                        break;\n                    default:\n                        hItem.h.apply(hItem.ctx, args);\n                        break;\n                }\n            }\n        }\n        eventProcessor && eventProcessor.afterTrigger\n            && eventProcessor.afterTrigger(eventType);\n        return this;\n    };\n    Eventful.prototype.triggerWithContext = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._$handlers) {\n            return this;\n        }\n        var _h = this._$handlers[type];\n        var eventProcessor = this._$eventProcessor;\n        if (_h) {\n            var argLen = args.length;\n            var ctx = args[argLen - 1];\n            var len = _h.length;\n            for (var i = 0; i < len; i++) {\n                var hItem = _h[i];\n                if (eventProcessor\n                    && eventProcessor.filter\n                    && hItem.query != null\n                    && !eventProcessor.filter(type, hItem.query)) {\n                    continue;\n                }\n                switch (argLen) {\n                    case 0:\n                        hItem.h.call(ctx);\n                        break;\n                    case 1:\n                        hItem.h.call(ctx, args[0]);\n                        break;\n                    case 2:\n                        hItem.h.call(ctx, args[0], args[1]);\n                        break;\n                    default:\n                        hItem.h.apply(ctx, args.slice(1, argLen - 1));\n                        break;\n                }\n            }\n        }\n        eventProcessor && eventProcessor.afterTrigger\n            && eventProcessor.afterTrigger(type);\n        return this;\n    };\n    return Eventful;\n}());\nexport default Eventful;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
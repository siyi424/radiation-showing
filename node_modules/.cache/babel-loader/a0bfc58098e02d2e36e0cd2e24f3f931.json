{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global document */\n\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { addEventListener } from 'zrender/lib/core/event.js';\nimport { warn } from '../../../util/log.js';\n/* global document */\n\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n */\n\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @inner\n */\n\n\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    })); // @ts-ignore TODO Polar\n\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    }); // Assemble table content\n\n    var lines = [headers.join(ITEM_SPLITER)];\n\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n\n      lines.push(items.join(ITEM_SPLITER));\n    }\n\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n */\n\n\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\n\n\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\n\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\n\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n\n  return {\n    series: series,\n    categories: categories\n  };\n}\n\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n\n    if (!line) {\n      continue;\n    }\n\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n\n  return {\n    name: seriesName,\n    data: data\n  };\n}\n\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\n\nvar DataView =\n/** @class */\nfunction (_super) {\n  __extends(DataView, _super);\n\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataView.prototype.onclick = function (ecModel, api) {\n    // FIXME: better way?\n    setTimeout(function () {\n      api.dispatchAction({\n        type: 'hideTip'\n      });\n    });\n    var container = api.getDom();\n    var model = this.model;\n\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n\n    var root = document.createElement('div'); // use padding to avoid 5px whitespace\n\n    root.style.cssText = 'position:absolute;top:0;bottom:0;left:0;right:0;padding:5px';\n    root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // Create elements\n\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin:10px 20px';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'overflow:auto';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n\n    if (zrUtil.isFunction(optionToContent)) {\n      var htmlOrDom = optionToContent(api.getOption());\n\n      if (zrUtil.isString(htmlOrDom)) {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      textarea.readOnly = model.get('readOnly');\n      var style = textarea.style; // eslint-disable-next-line max-len\n\n      style.cssText = 'display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none';\n      style.color = model.get('textColor');\n      style.borderColor = model.get('textareaBorderColor');\n      style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n      viewMain.appendChild(textarea);\n    }\n\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:5px;left:0;right:0'; // eslint-disable-next-line max-len\n\n    var buttonStyle = 'float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n\n        close();\n        return;\n      }\n\n      var newOption;\n\n      try {\n        if (zrUtil.isFunction(contentToOption)) {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n      backgroundColor: '#fff',\n      textColor: '#000',\n      textareaColor: '#fff',\n      textareaBorderColor: '#333',\n      buttonColor: '#c23531',\n      buttonTextColor: '#fff'\n    };\n    return defaultOption;\n  };\n\n  return DataView;\n}(ToolboxFeature);\n/**\n * @inner\n */\n\n\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      } // original data has name but new data has no name\n\n\n      var shouldDeleteName = original.name != null && newVal.name == null; // Original data has option\n\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n} // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","map":{"version":3,"names":["__extends","echarts","zrUtil","ToolboxFeature","addEventListener","warn","BLOCK_SPLITER","Array","join","ITEM_SPLITER","groupSeries","ecModel","seriesGroupByCategoryAxis","otherSeries","meta","eachRawSeries","seriesModel","coordSys","coordinateSystem","type","baseAxis","getBaseAxis","key","dim","index","categoryAxis","valueAxis","getOtherAxis","series","push","axisDim","axisIndex","other","assembleSeriesWithCategoryAxis","groups","tables","each","group","valueAxisDim","headers","concat","map","name","columns","model","getCategories","rawData","getRawData","mapArray","mapDimension","val","lines","i","length","items","j","assembleOtherSeries","data","vals","dimensions","argLen","arguments","dataIndex","getName","getContentFromModel","result","value","filter","str","replace","trim","isTSVFormat","block","firstLine","slice","indexOf","itemSplitRegex","RegExp","parseTSVContents","tsv","tsvLines","split","shift","categories","header","parseListContents","seriesName","line","name_1","hasName","isNaN","parseContents","blockMetaList","blocks","newOption","idx","blockMeta","axisKey","DataView","_super","apply","prototype","onclick","api","setTimeout","dispatchAction","container","getDom","_dom","removeChild","root","document","createElement","style","cssText","backgroundColor","get","lang","innerHTML","color","viewMain","textarea","optionToContent","contentToOption","isFunction","htmlOrDom","getOption","isString","isDom","appendChild","readOnly","borderColor","buttonContainer","buttonStyle","closeButton","refreshButton","self","close","process","env","NODE_ENV","e","Error","height","clientHeight","remove","dispose","getDefaultOption","defaultOption","show","icon","title","getLocaleModel","textColor","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","tryMergeDataOption","newData","originalData","newVal","original","isObject","isArray","newValIsObject","shouldDeleteName","defaults","registerAction","event","update","payload","newSeriesOptList","seriesOpt","getSeriesByName","extend","mergeOption"],"sources":["/home/siyi/Projects/radi-demo/radi-showing/node_modules/echarts/lib/component/toolbox/feature/DataView.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global document */\n\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { addEventListener } from 'zrender/lib/core/event.js';\nimport { warn } from '../../../util/log.js';\n/* global document */\n\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n */\n\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @inner\n */\n\n\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    })); // @ts-ignore TODO Polar\n\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    }); // Assemble table content\n\n    var lines = [headers.join(ITEM_SPLITER)];\n\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n\n      lines.push(items.join(ITEM_SPLITER));\n    }\n\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n */\n\n\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\n\n\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\n\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\n\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n\n  return {\n    series: series,\n    categories: categories\n  };\n}\n\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n\n    if (!line) {\n      continue;\n    }\n\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n\n  return {\n    name: seriesName,\n    data: data\n  };\n}\n\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\n\nvar DataView =\n/** @class */\nfunction (_super) {\n  __extends(DataView, _super);\n\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataView.prototype.onclick = function (ecModel, api) {\n    // FIXME: better way?\n    setTimeout(function () {\n      api.dispatchAction({\n        type: 'hideTip'\n      });\n    });\n    var container = api.getDom();\n    var model = this.model;\n\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n\n    var root = document.createElement('div'); // use padding to avoid 5px whitespace\n\n    root.style.cssText = 'position:absolute;top:0;bottom:0;left:0;right:0;padding:5px';\n    root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // Create elements\n\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin:10px 20px';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'overflow:auto';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n\n    if (zrUtil.isFunction(optionToContent)) {\n      var htmlOrDom = optionToContent(api.getOption());\n\n      if (zrUtil.isString(htmlOrDom)) {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      textarea.readOnly = model.get('readOnly');\n      var style = textarea.style; // eslint-disable-next-line max-len\n\n      style.cssText = 'display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none';\n      style.color = model.get('textColor');\n      style.borderColor = model.get('textareaBorderColor');\n      style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n      viewMain.appendChild(textarea);\n    }\n\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:5px;left:0;right:0'; // eslint-disable-next-line max-len\n\n    var buttonStyle = 'float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n\n        close();\n        return;\n      }\n\n      var newOption;\n\n      try {\n        if (zrUtil.isFunction(contentToOption)) {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n      backgroundColor: '#fff',\n      textColor: '#000',\n      textareaColor: '#fff',\n      textareaBorderColor: '#333',\n      buttonColor: '#c23531',\n      buttonTextColor: '#fff'\n    };\n    return defaultOption;\n  };\n\n  return DataView;\n}(ToolboxFeature);\n/**\n * @inner\n */\n\n\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      } // original data has name but new data has no name\n\n\n      var shouldDeleteName = original.name != null && newVal.name == null; // Original data has option\n\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n} // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;"],"mappings":"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"},"metadata":{},"sourceType":"module"}
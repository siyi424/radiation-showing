{"ast":null,"code":"import { __extends } from \"tslib\";\nimport Eventful from '../core/Eventful.js';\nimport requestAnimationFrame from './requestAnimationFrame.js';\nimport Animator from './Animator.js';\nexport function getTime() {\n  return new Date().getTime();\n}\n\nvar Animation = function (_super) {\n  __extends(Animation, _super);\n\n  function Animation(opts) {\n    var _this = _super.call(this) || this;\n\n    _this._running = false;\n    _this._time = 0;\n    _this._pausedTime = 0;\n    _this._pauseStart = 0;\n    _this._paused = false;\n    opts = opts || {};\n    _this.stage = opts.stage || {};\n    return _this;\n  }\n\n  Animation.prototype.addClip = function (clip) {\n    if (clip.animation) {\n      this.removeClip(clip);\n    }\n\n    if (!this._head) {\n      this._head = this._tail = clip;\n    } else {\n      this._tail.next = clip;\n      clip.prev = this._tail;\n      clip.next = null;\n      this._tail = clip;\n    }\n\n    clip.animation = this;\n  };\n\n  Animation.prototype.addAnimator = function (animator) {\n    animator.animation = this;\n    var clip = animator.getClip();\n\n    if (clip) {\n      this.addClip(clip);\n    }\n  };\n\n  Animation.prototype.removeClip = function (clip) {\n    if (!clip.animation) {\n      return;\n    }\n\n    var prev = clip.prev;\n    var next = clip.next;\n\n    if (prev) {\n      prev.next = next;\n    } else {\n      this._head = next;\n    }\n\n    if (next) {\n      next.prev = prev;\n    } else {\n      this._tail = prev;\n    }\n\n    clip.next = clip.prev = clip.animation = null;\n  };\n\n  Animation.prototype.removeAnimator = function (animator) {\n    var clip = animator.getClip();\n\n    if (clip) {\n      this.removeClip(clip);\n    }\n\n    animator.animation = null;\n  };\n\n  Animation.prototype.update = function (notTriggerFrameAndStageUpdate) {\n    var time = getTime() - this._pausedTime;\n\n    var delta = time - this._time;\n    var clip = this._head;\n\n    while (clip) {\n      var nextClip = clip.next;\n      var finished = clip.step(time, delta);\n\n      if (finished) {\n        clip.ondestroy();\n        this.removeClip(clip);\n        clip = nextClip;\n      } else {\n        clip = nextClip;\n      }\n    }\n\n    this._time = time;\n\n    if (!notTriggerFrameAndStageUpdate) {\n      this.trigger('frame', delta);\n      this.stage.update && this.stage.update();\n    }\n  };\n\n  Animation.prototype._startLoop = function () {\n    var self = this;\n    this._running = true;\n\n    function step() {\n      if (self._running) {\n        requestAnimationFrame(step);\n        !self._paused && self.update();\n      }\n    }\n\n    requestAnimationFrame(step);\n  };\n\n  Animation.prototype.start = function () {\n    if (this._running) {\n      return;\n    }\n\n    this._time = getTime();\n    this._pausedTime = 0;\n\n    this._startLoop();\n  };\n\n  Animation.prototype.stop = function () {\n    this._running = false;\n  };\n\n  Animation.prototype.pause = function () {\n    if (!this._paused) {\n      this._pauseStart = getTime();\n      this._paused = true;\n    }\n  };\n\n  Animation.prototype.resume = function () {\n    if (this._paused) {\n      this._pausedTime += getTime() - this._pauseStart;\n      this._paused = false;\n    }\n  };\n\n  Animation.prototype.clear = function () {\n    var clip = this._head;\n\n    while (clip) {\n      var nextClip = clip.next;\n      clip.prev = clip.next = clip.animation = null;\n      clip = nextClip;\n    }\n\n    this._head = this._tail = null;\n  };\n\n  Animation.prototype.isFinished = function () {\n    return this._head == null;\n  };\n\n  Animation.prototype.animate = function (target, options) {\n    options = options || {};\n    this.start();\n    var animator = new Animator(target, options.loop);\n    this.addAnimator(animator);\n    return animator;\n  };\n\n  return Animation;\n}(Eventful);\n\nexport default Animation;","map":{"version":3,"names":["__extends","Eventful","requestAnimationFrame","Animator","getTime","Date","Animation","_super","opts","_this","call","_running","_time","_pausedTime","_pauseStart","_paused","stage","prototype","addClip","clip","animation","removeClip","_head","_tail","next","prev","addAnimator","animator","getClip","removeAnimator","update","notTriggerFrameAndStageUpdate","time","delta","nextClip","finished","step","ondestroy","trigger","_startLoop","self","start","stop","pause","resume","clear","isFinished","animate","target","options","loop"],"sources":["/home/siyi/Projects/radi-demo/radi-showing/node_modules/zrender/lib/animation/Animation.js"],"sourcesContent":["import { __extends } from \"tslib\";\nimport Eventful from '../core/Eventful.js';\nimport requestAnimationFrame from './requestAnimationFrame.js';\nimport Animator from './Animator.js';\nexport function getTime() {\n    return new Date().getTime();\n}\nvar Animation = (function (_super) {\n    __extends(Animation, _super);\n    function Animation(opts) {\n        var _this = _super.call(this) || this;\n        _this._running = false;\n        _this._time = 0;\n        _this._pausedTime = 0;\n        _this._pauseStart = 0;\n        _this._paused = false;\n        opts = opts || {};\n        _this.stage = opts.stage || {};\n        return _this;\n    }\n    Animation.prototype.addClip = function (clip) {\n        if (clip.animation) {\n            this.removeClip(clip);\n        }\n        if (!this._head) {\n            this._head = this._tail = clip;\n        }\n        else {\n            this._tail.next = clip;\n            clip.prev = this._tail;\n            clip.next = null;\n            this._tail = clip;\n        }\n        clip.animation = this;\n    };\n    Animation.prototype.addAnimator = function (animator) {\n        animator.animation = this;\n        var clip = animator.getClip();\n        if (clip) {\n            this.addClip(clip);\n        }\n    };\n    Animation.prototype.removeClip = function (clip) {\n        if (!clip.animation) {\n            return;\n        }\n        var prev = clip.prev;\n        var next = clip.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this._head = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this._tail = prev;\n        }\n        clip.next = clip.prev = clip.animation = null;\n    };\n    Animation.prototype.removeAnimator = function (animator) {\n        var clip = animator.getClip();\n        if (clip) {\n            this.removeClip(clip);\n        }\n        animator.animation = null;\n    };\n    Animation.prototype.update = function (notTriggerFrameAndStageUpdate) {\n        var time = getTime() - this._pausedTime;\n        var delta = time - this._time;\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            var finished = clip.step(time, delta);\n            if (finished) {\n                clip.ondestroy();\n                this.removeClip(clip);\n                clip = nextClip;\n            }\n            else {\n                clip = nextClip;\n            }\n        }\n        this._time = time;\n        if (!notTriggerFrameAndStageUpdate) {\n            this.trigger('frame', delta);\n            this.stage.update && this.stage.update();\n        }\n    };\n    Animation.prototype._startLoop = function () {\n        var self = this;\n        this._running = true;\n        function step() {\n            if (self._running) {\n                requestAnimationFrame(step);\n                !self._paused && self.update();\n            }\n        }\n        requestAnimationFrame(step);\n    };\n    Animation.prototype.start = function () {\n        if (this._running) {\n            return;\n        }\n        this._time = getTime();\n        this._pausedTime = 0;\n        this._startLoop();\n    };\n    Animation.prototype.stop = function () {\n        this._running = false;\n    };\n    Animation.prototype.pause = function () {\n        if (!this._paused) {\n            this._pauseStart = getTime();\n            this._paused = true;\n        }\n    };\n    Animation.prototype.resume = function () {\n        if (this._paused) {\n            this._pausedTime += getTime() - this._pauseStart;\n            this._paused = false;\n        }\n    };\n    Animation.prototype.clear = function () {\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            clip.prev = clip.next = clip.animation = null;\n            clip = nextClip;\n        }\n        this._head = this._tail = null;\n    };\n    Animation.prototype.isFinished = function () {\n        return this._head == null;\n    };\n    Animation.prototype.animate = function (target, options) {\n        options = options || {};\n        this.start();\n        var animator = new Animator(target, options.loop);\n        this.addAnimator(animator);\n        return animator;\n    };\n    return Animation;\n}(Eventful));\nexport default Animation;\n"],"mappings":"AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAOC,qBAAP,MAAkC,4BAAlC;AACA,OAAOC,QAAP,MAAqB,eAArB;AACA,OAAO,SAASC,OAAT,GAAmB;EACtB,OAAO,IAAIC,IAAJ,GAAWD,OAAX,EAAP;AACH;;AACD,IAAIE,SAAS,GAAI,UAAUC,MAAV,EAAkB;EAC/BP,SAAS,CAACM,SAAD,EAAYC,MAAZ,CAAT;;EACA,SAASD,SAAT,CAAmBE,IAAnB,EAAyB;IACrB,IAAIC,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;IACAD,KAAK,CAACE,QAAN,GAAiB,KAAjB;IACAF,KAAK,CAACG,KAAN,GAAc,CAAd;IACAH,KAAK,CAACI,WAAN,GAAoB,CAApB;IACAJ,KAAK,CAACK,WAAN,GAAoB,CAApB;IACAL,KAAK,CAACM,OAAN,GAAgB,KAAhB;IACAP,IAAI,GAAGA,IAAI,IAAI,EAAf;IACAC,KAAK,CAACO,KAAN,GAAcR,IAAI,CAACQ,KAAL,IAAc,EAA5B;IACA,OAAOP,KAAP;EACH;;EACDH,SAAS,CAACW,SAAV,CAAoBC,OAApB,GAA8B,UAAUC,IAAV,EAAgB;IAC1C,IAAIA,IAAI,CAACC,SAAT,EAAoB;MAChB,KAAKC,UAAL,CAAgBF,IAAhB;IACH;;IACD,IAAI,CAAC,KAAKG,KAAV,EAAiB;MACb,KAAKA,KAAL,GAAa,KAAKC,KAAL,GAAaJ,IAA1B;IACH,CAFD,MAGK;MACD,KAAKI,KAAL,CAAWC,IAAX,GAAkBL,IAAlB;MACAA,IAAI,CAACM,IAAL,GAAY,KAAKF,KAAjB;MACAJ,IAAI,CAACK,IAAL,GAAY,IAAZ;MACA,KAAKD,KAAL,GAAaJ,IAAb;IACH;;IACDA,IAAI,CAACC,SAAL,GAAiB,IAAjB;EACH,CAdD;;EAeAd,SAAS,CAACW,SAAV,CAAoBS,WAApB,GAAkC,UAAUC,QAAV,EAAoB;IAClDA,QAAQ,CAACP,SAAT,GAAqB,IAArB;IACA,IAAID,IAAI,GAAGQ,QAAQ,CAACC,OAAT,EAAX;;IACA,IAAIT,IAAJ,EAAU;MACN,KAAKD,OAAL,CAAaC,IAAb;IACH;EACJ,CAND;;EAOAb,SAAS,CAACW,SAAV,CAAoBI,UAApB,GAAiC,UAAUF,IAAV,EAAgB;IAC7C,IAAI,CAACA,IAAI,CAACC,SAAV,EAAqB;MACjB;IACH;;IACD,IAAIK,IAAI,GAAGN,IAAI,CAACM,IAAhB;IACA,IAAID,IAAI,GAAGL,IAAI,CAACK,IAAhB;;IACA,IAAIC,IAAJ,EAAU;MACNA,IAAI,CAACD,IAAL,GAAYA,IAAZ;IACH,CAFD,MAGK;MACD,KAAKF,KAAL,GAAaE,IAAb;IACH;;IACD,IAAIA,IAAJ,EAAU;MACNA,IAAI,CAACC,IAAL,GAAYA,IAAZ;IACH,CAFD,MAGK;MACD,KAAKF,KAAL,GAAaE,IAAb;IACH;;IACDN,IAAI,CAACK,IAAL,GAAYL,IAAI,CAACM,IAAL,GAAYN,IAAI,CAACC,SAAL,GAAiB,IAAzC;EACH,CAnBD;;EAoBAd,SAAS,CAACW,SAAV,CAAoBY,cAApB,GAAqC,UAAUF,QAAV,EAAoB;IACrD,IAAIR,IAAI,GAAGQ,QAAQ,CAACC,OAAT,EAAX;;IACA,IAAIT,IAAJ,EAAU;MACN,KAAKE,UAAL,CAAgBF,IAAhB;IACH;;IACDQ,QAAQ,CAACP,SAAT,GAAqB,IAArB;EACH,CAND;;EAOAd,SAAS,CAACW,SAAV,CAAoBa,MAApB,GAA6B,UAAUC,6BAAV,EAAyC;IAClE,IAAIC,IAAI,GAAG5B,OAAO,KAAK,KAAKS,WAA5B;;IACA,IAAIoB,KAAK,GAAGD,IAAI,GAAG,KAAKpB,KAAxB;IACA,IAAIO,IAAI,GAAG,KAAKG,KAAhB;;IACA,OAAOH,IAAP,EAAa;MACT,IAAIe,QAAQ,GAAGf,IAAI,CAACK,IAApB;MACA,IAAIW,QAAQ,GAAGhB,IAAI,CAACiB,IAAL,CAAUJ,IAAV,EAAgBC,KAAhB,CAAf;;MACA,IAAIE,QAAJ,EAAc;QACVhB,IAAI,CAACkB,SAAL;QACA,KAAKhB,UAAL,CAAgBF,IAAhB;QACAA,IAAI,GAAGe,QAAP;MACH,CAJD,MAKK;QACDf,IAAI,GAAGe,QAAP;MACH;IACJ;;IACD,KAAKtB,KAAL,GAAaoB,IAAb;;IACA,IAAI,CAACD,6BAAL,EAAoC;MAChC,KAAKO,OAAL,CAAa,OAAb,EAAsBL,KAAtB;MACA,KAAKjB,KAAL,CAAWc,MAAX,IAAqB,KAAKd,KAAL,CAAWc,MAAX,EAArB;IACH;EACJ,CArBD;;EAsBAxB,SAAS,CAACW,SAAV,CAAoBsB,UAApB,GAAiC,YAAY;IACzC,IAAIC,IAAI,GAAG,IAAX;IACA,KAAK7B,QAAL,GAAgB,IAAhB;;IACA,SAASyB,IAAT,GAAgB;MACZ,IAAII,IAAI,CAAC7B,QAAT,EAAmB;QACfT,qBAAqB,CAACkC,IAAD,CAArB;QACA,CAACI,IAAI,CAACzB,OAAN,IAAiByB,IAAI,CAACV,MAAL,EAAjB;MACH;IACJ;;IACD5B,qBAAqB,CAACkC,IAAD,CAArB;EACH,CAVD;;EAWA9B,SAAS,CAACW,SAAV,CAAoBwB,KAApB,GAA4B,YAAY;IACpC,IAAI,KAAK9B,QAAT,EAAmB;MACf;IACH;;IACD,KAAKC,KAAL,GAAaR,OAAO,EAApB;IACA,KAAKS,WAAL,GAAmB,CAAnB;;IACA,KAAK0B,UAAL;EACH,CAPD;;EAQAjC,SAAS,CAACW,SAAV,CAAoByB,IAApB,GAA2B,YAAY;IACnC,KAAK/B,QAAL,GAAgB,KAAhB;EACH,CAFD;;EAGAL,SAAS,CAACW,SAAV,CAAoB0B,KAApB,GAA4B,YAAY;IACpC,IAAI,CAAC,KAAK5B,OAAV,EAAmB;MACf,KAAKD,WAAL,GAAmBV,OAAO,EAA1B;MACA,KAAKW,OAAL,GAAe,IAAf;IACH;EACJ,CALD;;EAMAT,SAAS,CAACW,SAAV,CAAoB2B,MAApB,GAA6B,YAAY;IACrC,IAAI,KAAK7B,OAAT,EAAkB;MACd,KAAKF,WAAL,IAAoBT,OAAO,KAAK,KAAKU,WAArC;MACA,KAAKC,OAAL,GAAe,KAAf;IACH;EACJ,CALD;;EAMAT,SAAS,CAACW,SAAV,CAAoB4B,KAApB,GAA4B,YAAY;IACpC,IAAI1B,IAAI,GAAG,KAAKG,KAAhB;;IACA,OAAOH,IAAP,EAAa;MACT,IAAIe,QAAQ,GAAGf,IAAI,CAACK,IAApB;MACAL,IAAI,CAACM,IAAL,GAAYN,IAAI,CAACK,IAAL,GAAYL,IAAI,CAACC,SAAL,GAAiB,IAAzC;MACAD,IAAI,GAAGe,QAAP;IACH;;IACD,KAAKZ,KAAL,GAAa,KAAKC,KAAL,GAAa,IAA1B;EACH,CARD;;EASAjB,SAAS,CAACW,SAAV,CAAoB6B,UAApB,GAAiC,YAAY;IACzC,OAAO,KAAKxB,KAAL,IAAc,IAArB;EACH,CAFD;;EAGAhB,SAAS,CAACW,SAAV,CAAoB8B,OAApB,GAA8B,UAAUC,MAAV,EAAkBC,OAAlB,EAA2B;IACrDA,OAAO,GAAGA,OAAO,IAAI,EAArB;IACA,KAAKR,KAAL;IACA,IAAId,QAAQ,GAAG,IAAIxB,QAAJ,CAAa6C,MAAb,EAAqBC,OAAO,CAACC,IAA7B,CAAf;IACA,KAAKxB,WAAL,CAAiBC,QAAjB;IACA,OAAOA,QAAP;EACH,CAND;;EAOA,OAAOrB,SAAP;AACH,CA1IgB,CA0IfL,QA1Ie,CAAjB;;AA2IA,eAAeK,SAAf"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import * as eventUtil from './event.js';\n\nvar GestureMgr = function () {\n  function GestureMgr() {\n    this._track = [];\n  }\n\n  GestureMgr.prototype.recognize = function (event, target, root) {\n    this._doTrack(event, target, root);\n\n    return this._recognize(event);\n  };\n\n  GestureMgr.prototype.clear = function () {\n    this._track.length = 0;\n    return this;\n  };\n\n  GestureMgr.prototype._doTrack = function (event, target, root) {\n    var touches = event.touches;\n\n    if (!touches) {\n      return;\n    }\n\n    var trackItem = {\n      points: [],\n      touches: [],\n      target: target,\n      event: event\n    };\n\n    for (var i = 0, len = touches.length; i < len; i++) {\n      var touch = touches[i];\n      var pos = eventUtil.clientToLocal(root, touch, {});\n      trackItem.points.push([pos.zrX, pos.zrY]);\n      trackItem.touches.push(touch);\n    }\n\n    this._track.push(trackItem);\n  };\n\n  GestureMgr.prototype._recognize = function (event) {\n    for (var eventName in recognizers) {\n      if (recognizers.hasOwnProperty(eventName)) {\n        var gestureInfo = recognizers[eventName](this._track, event);\n\n        if (gestureInfo) {\n          return gestureInfo;\n        }\n      }\n    }\n  };\n\n  return GestureMgr;\n}();\n\nexport { GestureMgr };\n\nfunction dist(pointPair) {\n  var dx = pointPair[1][0] - pointPair[0][0];\n  var dy = pointPair[1][1] - pointPair[0][1];\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nfunction center(pointPair) {\n  return [(pointPair[0][0] + pointPair[1][0]) / 2, (pointPair[0][1] + pointPair[1][1]) / 2];\n}\n\nvar recognizers = {\n  pinch: function (tracks, event) {\n    var trackLen = tracks.length;\n\n    if (!trackLen) {\n      return;\n    }\n\n    var pinchEnd = (tracks[trackLen - 1] || {}).points;\n    var pinchPre = (tracks[trackLen - 2] || {}).points || pinchEnd;\n\n    if (pinchPre && pinchPre.length > 1 && pinchEnd && pinchEnd.length > 1) {\n      var pinchScale = dist(pinchEnd) / dist(pinchPre);\n      !isFinite(pinchScale) && (pinchScale = 1);\n      event.pinchScale = pinchScale;\n      var pinchCenter = center(pinchEnd);\n      event.pinchX = pinchCenter[0];\n      event.pinchY = pinchCenter[1];\n      return {\n        type: 'pinch',\n        target: tracks[0].target,\n        event: event\n      };\n    }\n  }\n};","map":{"version":3,"names":["eventUtil","GestureMgr","_track","prototype","recognize","event","target","root","_doTrack","_recognize","clear","length","touches","trackItem","points","i","len","touch","pos","clientToLocal","push","zrX","zrY","eventName","recognizers","hasOwnProperty","gestureInfo","dist","pointPair","dx","dy","Math","sqrt","center","pinch","tracks","trackLen","pinchEnd","pinchPre","pinchScale","isFinite","pinchCenter","pinchX","pinchY","type"],"sources":["/home/siyi/Projects/radi-demo/radi-showing/node_modules/zrender/lib/core/GestureMgr.js"],"sourcesContent":["import * as eventUtil from './event.js';\nvar GestureMgr = (function () {\n    function GestureMgr() {\n        this._track = [];\n    }\n    GestureMgr.prototype.recognize = function (event, target, root) {\n        this._doTrack(event, target, root);\n        return this._recognize(event);\n    };\n    GestureMgr.prototype.clear = function () {\n        this._track.length = 0;\n        return this;\n    };\n    GestureMgr.prototype._doTrack = function (event, target, root) {\n        var touches = event.touches;\n        if (!touches) {\n            return;\n        }\n        var trackItem = {\n            points: [],\n            touches: [],\n            target: target,\n            event: event\n        };\n        for (var i = 0, len = touches.length; i < len; i++) {\n            var touch = touches[i];\n            var pos = eventUtil.clientToLocal(root, touch, {});\n            trackItem.points.push([pos.zrX, pos.zrY]);\n            trackItem.touches.push(touch);\n        }\n        this._track.push(trackItem);\n    };\n    GestureMgr.prototype._recognize = function (event) {\n        for (var eventName in recognizers) {\n            if (recognizers.hasOwnProperty(eventName)) {\n                var gestureInfo = recognizers[eventName](this._track, event);\n                if (gestureInfo) {\n                    return gestureInfo;\n                }\n            }\n        }\n    };\n    return GestureMgr;\n}());\nexport { GestureMgr };\nfunction dist(pointPair) {\n    var dx = pointPair[1][0] - pointPair[0][0];\n    var dy = pointPair[1][1] - pointPair[0][1];\n    return Math.sqrt(dx * dx + dy * dy);\n}\nfunction center(pointPair) {\n    return [\n        (pointPair[0][0] + pointPair[1][0]) / 2,\n        (pointPair[0][1] + pointPair[1][1]) / 2\n    ];\n}\nvar recognizers = {\n    pinch: function (tracks, event) {\n        var trackLen = tracks.length;\n        if (!trackLen) {\n            return;\n        }\n        var pinchEnd = (tracks[trackLen - 1] || {}).points;\n        var pinchPre = (tracks[trackLen - 2] || {}).points || pinchEnd;\n        if (pinchPre\n            && pinchPre.length > 1\n            && pinchEnd\n            && pinchEnd.length > 1) {\n            var pinchScale = dist(pinchEnd) / dist(pinchPre);\n            !isFinite(pinchScale) && (pinchScale = 1);\n            event.pinchScale = pinchScale;\n            var pinchCenter = center(pinchEnd);\n            event.pinchX = pinchCenter[0];\n            event.pinchY = pinchCenter[1];\n            return {\n                type: 'pinch',\n                target: tracks[0].target,\n                event: event\n            };\n        }\n    }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}